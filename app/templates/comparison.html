{% extends "base.html" %}

{% block title %}Comparison - The Richverse{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card dashboard-overview px-4 py-3 shadow-sm">
    <div class="row g-3">
      <!-- Metrics Bar Chart -->
      <div class="col-lg-6">
        <div class="card chart-glow shadow-sm" style="height: 350px;">
          <div class="card-header">Comparison Metrics</div>
          <div class="card-body d-flex align-items-center justify-content-center">
            <canvas id="metricsChart"></canvas>
          </div>
        </div>
      </div>
      <!-- Cumulative Returns Line Chart -->
      <div class="col-lg-6">
        <div class="card chart-glow shadow-sm" style="height: 350px;">
          <div class="card-header">Cumulative Returns Comparison</div>
          <div class="card-body d-flex align-items-center justify-content-center">
            <canvas id="comparisonChart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container mt-4">
  <div class="row gx-3 gy-4">
    <!-- Allocation Pie Chart for Portfolio A -->
    <div class="col-md-6">
      <div class="card chart-glow shadow-sm" style="height: 350px;">
        <div class="card-header">Allocation - {{ name_a }}</div>
        <div class="card-body d-flex align-items-center justify-content-center">
          <canvas id="allocationChartA"></canvas>
        </div>
      </div>
    </div>
    <!-- Allocation Pie Chart for Portfolio B -->
    <div class="col-md-6">
      <div class="card chart-glow shadow-sm" style="height: 350px;">
        <div class="card-header">Allocation - {{ name_b }}</div>
        <div class="card-body d-flex align-items-center justify-content-center">
          <canvas id="allocationChartB"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Inject comparison configuration -->
<script type="text/javascript">
  window.comparisonConfig = {
    weightsA: {{ weights_a|tojson }},
    weightsB: {{ weights_b|tojson }},
    startDate: "{{ start_date }}",
    initialInvestment: {{ initial_investment }},
    nameA: "{{ name_a }}",
    nameB: "{{ name_b }}"
  };
</script>

<!-- Comparison page JS module -->
<script type="module" src="{{ url_for('static', filename='js/comparison.js') }}"></script>
{% endblock %}
